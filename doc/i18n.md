# Internationalization (i18n)

This document describes the implementation of internationalization in the project.

## Configuration

### Dependency

The project uses `@nuxtjs/i18n` (v10.2.3).

### Configuration in nuxt.config.ts

```typescript
i18n: {
  baseUrl: process.env.BASE_URL || 'http://localhost:3000',
  locales: [
    {
      code: 'es',
      language: 'es-ES',
      file: 'es.json',
      flag: 'ðŸ‡ªðŸ‡¸',
      name: 'EspaÃ±ol',
      shortName: 'ES'
    },
    {
      code: 'en',
      language: 'en-US',
      file: 'en.json',
      flag: 'ðŸ‡¬ðŸ‡§',
      name: 'English',
      shortName: 'EN'
    }
  ],
  defaultLocale: 'en',
  strategy: 'no_prefix',
  detectBrowserLanguage: {
    useCookie: true,
    cookieKey: 'i18n_redirected',
    redirectOn: 'root',
    alwaysRedirect: false,
    cookieCrossOrigin: process.env.NODE_ENV === 'production'
  }
}
```

## Available Languages

| Code | Language | Locale | Flag |
|------|----------|--------|------|
| `en` | English | en-US | ðŸ‡¬ðŸ‡§ |
| `es` | EspaÃ±ol | es-ES | ðŸ‡ªðŸ‡¸ |

The default language is **English** (`en`).

## URL Strategy

The **`no_prefix`** strategy is used:

- Routes do NOT have language prefixes
- Example: `/dashboard` (not `/es/dashboard`)
- Detection is done via cookies and browser settings

## Language Detection

### Configuration

| Option | Value | Description |
|--------|-------|-------------|
| `useCookie` | `true` | Saves preference in cookie |
| `cookieKey` | `i18n_redirected` | Cookie name |
| `redirectOn` | `root` | Redirect only at root |
| `alwaysRedirect` | `false` | Don't always redirect |

### Detection Flow

1. Check `i18n_redirected` cookie
2. If not present, detect browser language
3. Save preference in cookie
4. Apply detected language

## Translation Files

### Location

```
i18n/locales/
â”œâ”€â”€ en.json    # English translations
â””â”€â”€ es.json    # Spanish translations
```

### Structure

```json
{
  "menu": {
    "dashboard": "Dashboard",
    "settings": "Settings"
  },
  "seo": {
    "home": {
      "title": "Home | App Name",
      "description": "Welcome to our application"
    }
  },
  "common": {
    "loading": "Loading...",
    "error": "An error occurred"
  },
  "validation": {
    "required": "This field is required",
    "email": "Please enter a valid email"
  }
}
```

## Usage in Components

### useI18n Composable

```vue
<script setup lang="ts">
const { t, locale, locales, setLocale } = useI18n()
</script>

<template>
  <h1>{{ t('menu.dashboard') }}</h1>
</template>
```

### Available Methods

| Method | Description |
|--------|-------------|
| `t(key)` | Translates a key |
| `locale` | Current language |
| `locales` | List of available languages |
| `setLocale(code)` | Change language |
| `localeProperties` | Current language properties |

### In Templates

```vue
<template>
  <!-- Using $t directly -->
  <h1>{{ $t('menu.dashboard') }}</h1>

  <!-- With composable -->
  <p>{{ t('common.loading') }}</p>
</template>
```

### In Script

```typescript
const { t } = useI18n()

// In computed properties
const pageTitle = computed(() => t('seo.home.title'))

// In functions
function showError() {
  alert(t('common.error'))
}
```

## Language Switching

### LanguageSelector Component

The project includes a language selector component:

```vue
<!-- app/components/layout/LanguageSelector.vue -->
<script setup lang="ts">
const { locales, locale, setLocale } = useI18n()

const availableLocales = computed(() =>
  locales.value.filter(l => typeof l === 'object')
)

const items = computed(() =>
  availableLocales.value.map(lang => ({
    label: `${lang.flag} ${lang.name}`,
    value: lang.code,
    onSelect: () => setLocale(lang.code)
  }))
)
</script>
```

### Usage

```vue
<template>
  <LayoutLanguageSelector />
</template>
```

### Features

- Dropdown with flags and names
- Shows current language with flag and short code
- Automatically saves preference in cookie

## SEO Integration

### Dynamic Meta Tags

```vue
<script setup lang="ts">
const { t } = useI18n()

useSeoMeta({
  title: () => t('seo.home.title'),
  description: () => t('seo.home.description'),
  ogTitle: () => t('seo.home.title'),
  ogDescription: () => t('seo.home.description')
})
</script>
```

### Lang Attribute

```vue
<script setup lang="ts">
const { locale } = useI18n()
</script>

<template>
  <html :lang="locale">
    <!-- ... -->
  </html>
</template>
```

## Adding New Translations

### 1. Add Key

In `i18n/locales/en.json`:

```json
{
  "newSection": {
    "title": "New Section",
    "description": "This is a new section"
  }
}
```

In `i18n/locales/es.json`:

```json
{
  "newSection": {
    "title": "Nueva Seccion",
    "description": "Esta es una nueva seccion"
  }
}
```

### 2. Use in Component

```vue
<template>
  <h1>{{ t('newSection.title') }}</h1>
  <p>{{ t('newSection.description') }}</p>
</template>
```

## Adding a New Language

### 1. Create Translation File

Create `i18n/locales/fr.json`:

```json
{
  "menu": {
    "dashboard": "Tableau de bord",
    "settings": "Parametres"
  }
}
```

### 2. Update Configuration

In `nuxt.config.ts`:

```typescript
i18n: {
  locales: [
    // ... existing languages
    {
      code: 'fr',
      language: 'fr-FR',
      file: 'fr.json',
      flag: 'ðŸ‡«ðŸ‡·',
      name: 'FranÃ§ais',
      shortName: 'FR'
    }
  ]
}
```

### 3. Copy Complete Structure

Copy the entire structure from `en.json` to the new file and translate.

## Best Practices

### Key Organization

```json
{
  "section": {
    "subsection": {
      "item": "Value"
    }
  }
}
```

Recommended structure:

| Section | Purpose |
|---------|---------|
| `menu` | Navigation and menus |
| `seo` | Meta tags and titles |
| `common` | Common texts (loading, error, etc.) |
| `validation` | Validation messages |
| `header` | Header texts |
| `footer` | Footer texts |
| `profile` | Profile section |
| `auth` | Authentication |

### Naming Convention

- Use camelCase for keys
- Descriptive and consistent names
- Group by functionality

### Pluralization

```json
{
  "items": "item | items",
  "cart": {
    "items": "No items | 1 item | {count} items"
  }
}
```

```vue
<template>
  <p>{{ t('cart.items', count) }}</p>
</template>
```

### Interpolation

```json
{
  "greeting": "Hello, {name}!",
  "message": "You have {count} new messages"
}
```

```vue
<template>
  <p>{{ t('greeting', { name: userName }) }}</p>
</template>
```

## Debugging

### View Current Language

```typescript
const { locale, localeProperties } = useI18n()

console.log('Current language:', locale.value)
console.log('Properties:', localeProperties.value)
```

### List All Translations

```typescript
const { $i18n } = useNuxtApp()

console.log('All translations:', $i18n.messages)
```

## Technical Considerations

### SSR

- Translations are loaded on the server
- No content flicker on hydration
- Cookie is read on both server and client

### Performance

- Translation files are loaded on demand
- Automatic translation caching
- Does not affect initial load time

### Fallback

If a translation doesn't exist:
1. Search in default language
2. If also missing, display the key
